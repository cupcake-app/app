(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3af840c2"],{"02de":function(t,e,i){"use strict";function a(t){return"none"===window.getComputedStyle(t).display||null===t.offsetParent}i.d(e,"a",(function(){return a}))},"0a26":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i("ad06"),s=i("9884"),n=i("ea8e"),o=function(t){var e=t.parent,i=t.bem,o=t.role;return{mixins:[Object(s["a"])(e)],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"}},computed:{isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},iconStyle:function(){var t=this.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===o&&!this.checked?-1:0}},methods:{onClick:function(t){var e=this.$refs.label,i=t.target,a=e&&(e===i||e.contains(i));this.isDisabled||a&&this.labelDisabled||this.toggle(),this.$emit("click",t)}},render:function(){var t=arguments[0],e=this.slots,s=this.checked,c=e("icon",{checked:s})||t(a["a"],{attrs:{name:"success"},style:this.iconStyle}),r=e()&&t("span",{ref:"label",class:i("label",[this.labelPosition,{disabled:this.isDisabled}])},[e()]),d=[t("div",{class:i("icon",[this.shape,{disabled:this.isDisabled,checked:s}]),style:{fontSize:Object(n["a"])(this.iconSize)}},[c])];return"left"===this.labelPosition?d.unshift(r):d.push(r),t("div",{attrs:{role:o,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:i(),on:{click:this.onClick}},[d])}}}},"0b76":function(t,e,i){"use strict";var a=i("6b19"),s=i.n(a);s.a},"1b7a":function(t,e,i){"use strict";i.r(e);var a,s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-favorite"},[i("div",{staticClass:"com-title-bar"},[i("div",{staticClass:"box van-hairline--bottom"},[i("div",{staticClass:"back",on:{click:t.$routerBack}}),i("div",{staticClass:"title"},[t._v("我喜欢的")]),i("div",{staticClass:"action"},[i("div",{staticClass:"button",on:{click:t.editHandel}},[t._v(t._s(t.edit.text))])])])]),i("div",{staticClass:"data",style:t.edit.active?"padding-bottom: 50px":""},[t.favorite.empty?i("div",{staticClass:"empty"},[t._m(0),i("div",{staticClass:"text"},[t._v("您还没有喜欢的视频")])]):t._e(),t.favorite.empty?t._e():i("div",{staticClass:"box"},[i("van-list",{attrs:{finished:t.favorite.finished,"finished-text":""},on:{load:t.initData},model:{value:t.favorite.loading,callback:function(e){t.$set(t.favorite,"loading",e)},expression:"favorite.loading"}},t._l(t.favorite.data,(function(e,a){return i("div",{key:a,staticClass:"item"},[t.edit.active?i("div",{staticClass:"checkbox",on:{click:function(e){return t.selectHandel(a)}}},[i("div",{staticClass:"ico",class:t.favorite.data[a].checked?"active":""})]):t._e(),i("div",{staticClass:"video",on:{click:function(i){return t.videoHandel(e.video.uuid)}}},[i("div",{staticClass:"image"},[i("img",{attrs:{src:e.video.thumbnail}})]),i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[t._v("\n                                "+t._s(e.video.title)+"\n                            ")]),i("div",{staticClass:"star"},[i("div",{staticClass:"ico"},[i("van-icon",{attrs:{name:"star",color:"#FFEA03"}})],1),i("div",{staticClass:"text"},[t._v(t._s(e.video.star))])])])])])})),0)],1)]),t.edit.active?i("div",{staticClass:"x-action van-hairline--top"},[i("div",{staticClass:"box"},[i("div",{staticClass:"item select van-hairline--right",on:{click:t.allSelectHandel}},[t._v(t._s(t.checkbox.text))]),i("div",{staticClass:"item delete",on:{click:t.deleteHandel}},[t._v("删除")])])]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image"},[a("img",{attrs:{src:i("7c14f")}})])}],o=i("bd86"),c=(i("68ef"),i("09fe"),i("2381"),i("d282")),r=i("0a26"),d=Object(c["a"])("checkbox"),l=d[0],h=d[1],f=l({mixins:[Object(r["a"])({bem:h,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(t){this.parent?this.setParentValue(t):this.$emit("input",t)}}},watch:{value:function(t){this.$emit("change",t)}},methods:{toggle:function(){var t=this,e=!this.checked;clearTimeout(this.toggleTask),this.toggleTask=setTimeout((function(){t.checked=e}))},setParentValue:function(t){var e=this.parent,i=e.value.slice();if(t){if(e.max&&i.length>=e.max)return;-1===i.indexOf(this.name)&&(i.push(this.name),e.$emit("input",i))}else{var a=i.indexOf(this.name);-1!==a&&(i.splice(a,1),e.$emit("input",i))}}}}),v=(i("2994"),i("2bdd")),u=(i("7f7f"),i("c3a6"),i("ad06")),m={components:(a={},Object(o["a"])(a,u["a"].name,u["a"]),Object(o["a"])(a,v["a"].name,v["a"]),Object(o["a"])(a,f.name,f),a),data:function(){return{favorite:{data:[],loading:!1,prefers:!1,empty:!1},page:{favorite:1},edit:{active:!1,text:"编辑"},checkbox:{icon:{active:"http://image.sevend.me/storage/image/common/checkbox/checkbox_active.png",inactive:"http://image.sevend.me/storage/image/common/checkbox/checkbox.png"},all:!1,text:"全选"}}},beforeRouteEnter:function(t,e,i){t.meta.Load=!1,"/video/index"!==e.path&&(t.meta.Load=!0),i()},activated:function(){this.edit={active:!1,text:"编辑"},this.checkbox={icon:{active:"http://image.sevend.me/storage/image/common/checkbox/checkbox_active.png",inactive:"http://image.sevend.me/storage/image/common/checkbox/checkbox.png"},all:!1,text:"全选"},this.$route.meta.Load&&(this.favorite={data:[],loading:!1,prefers:!1,empty:!1},this.page={favorite:1})},mounted:function(){},methods:{initData:function(){var t=this;this.$axios.get("/api/app/video/favorite/store",{page:this.page.favorite}).then((function(e){var i=e.data.code,a=e.data.result;if(200===i){t.page.favorite++,t.page.favorite>a.last_page&&(t.favorite.finished=!0);for(var s=0;s<a.data.length;s++)a.data[s].checked=!1;t.favorite.data=t.favorite.data.concat(a.data),0===t.favorite.data.length&&(t.favorite.empty=!0),t.favorite.loading=!1}}))},videoHandel:function(t){this.$router.push("/video/index?uuid="+t)},editHandel:function(){this.edit.active=!this.edit.active,this.edit.text=this.edit.active?"完成":"编辑"},selectHandel:function(t){this.favorite.data[t].checked=!this.favorite.data[t].checked},allSelectHandel:function(){this.checkbox.all=!this.checkbox.all,this.checkbox.text=this.checkbox.all?"取消全选":"全选";for(var t=0;t<this.favorite.data.length;t++)this.favorite.data[t].checked=this.checkbox.all},deleteHandel:function(){var t=this;this.$dialog.confirm({title:"提示",message:"确认删除选中的视频？"}).then((function(){t.$toast.loading({duration:0,forbidClick:!0,mask:!1,message:"删除中..."});for(var e=[],i=0;i<t.favorite.data.length;i++)t.favorite.data[i].checked&&e.push(t.favorite.data[i].video.uuid);t.$axios.post("/api/app/video/favorite/delete",{video:e}).then((function(e){var i=e.data.code;200!==i?t.$toast.fail("请稍后再试~"):setTimeout((function(){t.$toast.success("删除成功"),t.edit={active:!1,text:"编辑"},t.checkbox={icon:{active:"http://image.sevend.me/storage/image/common/checkbox/checkbox_active.png",inactive:"http://image.sevend.me/storage/image/common/checkbox/checkbox.png"},all:!1,text:"全选"},t.favorite={data:[],loading:!1,prefers:!1,empty:!1},t.page={favorite:1}}),500)}))}))}}},g=m,p=(i("0b76"),i("2877")),b=Object(p["a"])(g,s,n,!1,null,"50c53b38",null);e["default"]=b.exports},2381:function(t,e,i){},2994:function(t,e,i){"use strict";i("68ef"),i("c0c2")},"2bdd":function(t,e,i){"use strict";var a=i("d282"),s=i("02de"),n=i("5fbe"),o=i("a8c1"),c=i("543e"),r=Object(a["a"])("list"),d=r[0],l=r[1],h=r[2];e["a"]=d({mixins:[Object(n["a"])((function(t){this.scroller||(this.scroller=Object(o["c"])(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:Number,default:300},direction:{type:String,default:"down"}},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.loading||t.finished||t.error)){var e,i=t.$el,a=t.scroller,n=t.offset,o=t.direction;e=a.getBoundingClientRect?a.getBoundingClientRect():{top:0,bottom:a.innerHeight};var c=e.bottom-e.top;if(!c||Object(s["a"])(i))return!1;var r=!1,d=t.$refs.placeholder.getBoundingClientRect();r="up"===o?d.top-e.top<=n:d.bottom-e.bottom<=n,r&&(t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",class:l("placeholder")});return t("div",{class:l(),attrs:{role:"feed","aria-busy":this.loading}},["down"===this.direction?this.slots():e,this.loading&&t("div",{class:l("loading"),key:"loading"},[this.slots("loading")||t(c["a"],{attrs:{size:"16"}},[this.loadingText||h("loading")])]),this.finished&&this.finishedText&&t("div",{class:l("finished-text")},[this.finishedText]),this.error&&this.errorText&&t("div",{on:{click:this.clickErrorText},class:l("error-text")},[this.errorText]),"up"===this.direction?this.slots():e])}})},"6b19":function(t,e,i){},"7c14f":function(t,e,i){t.exports=i.p+"img/empty.64e1c456.png"},c0c2:function(t,e,i){},c3a6:function(t,e,i){"use strict";i("68ef"),i("09fe")}}]);
//# sourceMappingURL=chunk-3af840c2.e22893bf.js.map