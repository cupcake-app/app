(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e962e14"],{4386:function(e,t,s){e.exports=s.p+"img/view_active.3f03d195.svg"},"84b9":function(e,t,s){"use strict";var i=s("e813"),a=s.n(i);function n(){return new Promise((function(e,t){window.requestIdleCallback&&requestIdleCallback((function(){a.a.get((function(t){var s=t.map((function(e){return e.value})),i=a.a.x64hash128(s.join(""),31);e(i)}))}))}))}t["a"]={device:n}},8768:function(e,t,s){e.exports=s.p+"img/view.86da8dc1.svg"},aaee:function(e,t,s){},b953:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"register-index"},[e._m(0),i("div",{staticClass:"box"},[i("div",{staticClass:"item username"},[i("div",{staticClass:"label"},[e._v("手机号")]),i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],ref:"username",attrs:{type:"tel",maxlength:"13"},domProps:{value:e.phone},on:{blur:e.usernameBlur,focus:e.usernameFocus,input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e.fix.clear?i("div",{staticClass:"clear",on:{click:e.clearHandel}},[i("img",{attrs:{src:s("eb2f")}})]):e._e()]),i("div",{staticClass:"item code"},[i("div",{staticClass:"label"},[e._v("验证码")]),i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.input.code,expression:"input.code"}],ref:"password",attrs:{type:"tel",maxlength:"6"},domProps:{value:e.input.code},on:{input:function(t){t.target.composing||e.$set(e.input,"code",t.target.value)}}})]),i("div",{staticClass:"sms",class:e.sms.active?"active":"",on:{click:e.smsHandel}},[e._v(e._s(e.sms.text))])]),i("div",{staticClass:"item password"},[i("div",{staticClass:"label"},[e._v("密码")]),i("div",{staticClass:"input"},["checkbox"===e.view.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.input.password,expression:"input.password"}],ref:"password",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.input.password)?e._i(e.input.password,null)>-1:e.input.password},on:{input:e.viewChange,change:function(t){var s=e.input.password,i=t.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);i.checked?o<0&&e.$set(e.input,"password",s.concat([n])):o>-1&&e.$set(e.input,"password",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.input,"password",a)}}}):"radio"===e.view.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.input.password,expression:"input.password"}],ref:"password",attrs:{type:"radio"},domProps:{checked:e._q(e.input.password,null)},on:{input:e.viewChange,change:function(t){return e.$set(e.input,"password",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.input.password,expression:"input.password"}],ref:"password",attrs:{type:e.view.type},domProps:{value:e.input.password},on:{input:[function(t){t.target.composing||e.$set(e.input,"password",t.target.value)},e.viewChange]}})]),e.fix.view?i("div",{staticClass:"view",on:{click:e.viewHandel}},[e.view.active?e._e():i("img",{attrs:{src:s("8768")}}),e.view.active?i("img",{attrs:{src:s("4386")}}):e._e()]):e._e()])]),i("div",{staticClass:"button"},[i("div",{staticClass:"item login",on:{click:e.registerHandel}},[e._v("注册")]),i("div",{staticClass:"item register",on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回登录")])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"x-title"},[s("div",{staticClass:"title"},[e._v("注册")]),s("div",{staticClass:"text"},[e._v("欢迎加入左手")])])}],n=(s("a481"),s("84b9")),o={data:function(){return{phone:"",input:{username:"",password:"",code:"",device:null},fix:{clear:!1,view:!1},view:{type:"password",active:!1},forget:{active:!0},sms:{active:!1,text:"获取验证码",interval:null,time:60}}},watch:{phone:function(e,t){this.phone=e.length>t.length?e.replace(/\s/g,"").replace(/(\d{3})(\d{0,4})(\d{0,4})/,"$1 $2 $3"):this.phone.trim(),this.fix.clear=!!this.phone}},mounted:function(){var e=this;n["a"].device().then((function(t){e.input.device=t})),window.onresize=function(){e.forget.active=!e.forget.active}},methods:{clearHandel:function(){this.phone="",this.$refs.username.focus()},usernameFocus:function(){""!==this.phone&&(this.fix.clear=!0)},usernameBlur:function(){var e=this;setTimeout((function(){e.fix.clear=!1}),10)},smsHandel:function(){var e=this,t=this.phone.replace(/\s/gi,"");11===t.length?this.sms.active||(this.$toast.loading({duration:0,forbidClick:!0,mask:!1,message:"发送中..."}),this.$axios.post("/api/app/sms/send",{phone:t}).then((function(t){var s=t.data.code;if(200===s)return e.sms.active=!0,e.$toast("发送成功"),void(e.sms.interval=setInterval((function(){e.sms.time--,e.sms.time?e.sms.text=e.sms.time+"秒后重发":(clearInterval(e.sms.interval),e.$toast.clear(),e.sms.active=!1,e.sms.text="重发验证码",e.sms.time=60)}),1e3));e.$toast("请稍后再试~")}))):this.$toast("请输入手机号码")},viewChange:function(){this.fix.view=!!this.input.password},viewHandel:function(){this.view.active=!this.view.active,this.view.active?this.view.type="text":this.view.type="password"},registerHandel:function(){var e=this,t=this.phone.replace(/\s/gi,""),s=this.input.code,i=this.input.password;11===t.length?6===s.length?0!==i.length?(this.$toast.loading({duration:0,forbidClick:!0,mask:!1,message:"注册中..."}),this.$axios.post("/api/app/auth/register",{phone:t,code:s,password:i,device:this.input.device,platform:"web",system:navigator.userAgent,version:1e3}).then((function(t){var s=t.data.code,i=t.data.result;if(200===s)return e.$toast("注册成功,正在登录"),localStorage.setItem("token",i.token),localStorage.setItem("salt",i.salt),localStorage.setItem("expires",i.expires),void setTimeout((function(){e.$router.replace("/user/index"),e.$toast.clear()}),1e3);3002!==s?4e3!==s?e.$toast.fail("请稍后再试~"):e.$toast.fail("该手机号已注册，请登录"):e.$toast.fail("验证码错误")}))):this.$toast("请输入密码"):this.$toast("请输入验证码"):this.$toast("请输入手机号码")}}},r=o,c=(s("bbbf"),s("2877")),l=Object(c["a"])(r,i,a,!1,null,"5b768c74",null);t["default"]=l.exports},bbbf:function(e,t,s){"use strict";var i=s("aaee"),a=s.n(i);a.a},eb2f:function(e,t,s){e.exports=s.p+"img/clear.5329eb2d.svg"}}]);
//# sourceMappingURL=chunk-9e962e14.ee19d8a4.js.map